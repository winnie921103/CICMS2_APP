<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>臺北榮民總醫院-護理品質管理系統</title>
    <link rel="stylesheet" href="plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/RWD1024_up.css">
    <link rel="stylesheet" href="css/RWD768_up.css">
    <link rel="stylesheet" href="css/RWD767_down.css">
    <link rel="stylesheet" href="css/RWD_special.css">
</head>
<body class="index">
<!-- content -->
<div class="page-wrapper" id="container">
    <div class="main">
        <div id="app">
            <ul>
                <li>Music</li>
                <li>Movies</li>
                <li>Apps</li>
                <div class="focus-el el--1"></div>
                <div class="focus-el el--2"></div>
            </ul>
        </div>
        <div class="btn_wrap flex">
        <a href="index.html" class="btn blue_btn">部級</a>
        <a href="index_mid.html" class="btn gray_btn">中層</a>
        <a href="index_ward.html" class="btn gray_btn">病房</a>
        </div>
        <div class="title">監測計畫</div>
        <div class="submenu">
            <a href="page/Mainmenu.html?Emergency">急救車管理及使用正確性</a>
            <a href="page/Mainmenu.html?Medicine">給藥正確性及程序完整性</a>
            <a href="page/Mainmenu.html?Body">身體約束護理正確性</a>
        </div>
    </div>
    <div class="footer T_center">
        <a href="index.html"><img src="image/home.png" alt=""></a>
    </div>
</div>
<!--JS -->
<script type="text/javascript" src="plugins/jquery/jquery-3.4.1.min.js"></script>
<script type="text/javascript" src="plugins/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="plugins/pushy.js"></script>
<script type="text/javascript" src="js/custom.js"></script>
<script type="text/javascript" src="js/gsap.min.js"></script>
<script>
    
        const liContainer = document.querySelector("ul");
        const liEls = [...document.querySelectorAll("ul li")];
        const slideEl_1 = document.querySelector(".focus-el.el--1");
        const slideEl_2 = document.querySelector(".focus-el.el--2");

        gsap.defaults({
            ease: "ease.inOut"
        });
        let tl = gsap.timeline();

        let liRect = liContainer.getBoundingClientRect();
        let slideEl_1_DefaultWidth = slideEl_1.getBoundingClientRect().width;
        let slideEl_1_DefaultLeft = slideEl_1.getBoundingClientRect().left;
        let slideEl_2_DefaultLeft = slideEl_2.getBoundingClientRect().left;

        let startPosIndex = 1;
        let reachedEnd = false;
        let activeIndex = startPosIndex;

        let animationDuration = 0.2;

        liEls.forEach((el, index) => {
            let elRect = el.getBoundingClientRect();

            el.addEventListener("mousedown", () => {
                if (reachedEnd && index + 1 == startPosIndex) {
                    tl.to(slideEl_1, animationDuration, { left: `${liRect.width}px` });
                    tl.to(
                        slideEl_2,
                        animationDuration,
                        { left: `${elRect.left - liRect.left}px` },
                        `-=${animationDuration}`
                    );
                    tl.set(
                        slideEl_1,
                        { left: `${slideEl_1_DefaultLeft - liRect.left}px` },
                        `+=${animationDuration}`
                    );
                    tl.set(
                        slideEl_2,
                        { left: `${slideEl_2_DefaultLeft - liRect.left}px` },
                        `+=${animationDuration}`
                    );
                }

                let timesWidth =
                    index + 1 - activeIndex + 1 <= 0 ? 1 : index + 1 - activeIndex + 1;
                activeIndex = index + 1;

                tl.to(slideEl_1, animationDuration, {
                    width: `${timesWidth * slideEl_1_DefaultWidth}px`
                });
                if (index + 1 != startPosIndex || reachedEnd == false) {
                    tl.to(slideEl_1, animationDuration, {
                        left: `${elRect.left - liRect.left}px`,
                        width: `${slideEl_1_DefaultWidth}px`
                    });
                }

                if (index + 1 == liEls.length) {
                    reachedEnd = true;
                } else {
                    reachedEnd = false;
                }
            });
        });

</script>
</body>
</html>